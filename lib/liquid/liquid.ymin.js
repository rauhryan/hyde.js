var Liquid={author:"M@ McCray <darthapo@gmail.com>",version:"1.2.1",readTemplateFile:function(A){throw ("This liquid context does not allow includes.")},registerFilters:function(A){Liquid.Template.registerFilter(A)},parse:function(A){return Liquid.Template.parse(A)}};Liquid.Tag=Class.create({initialize:function(B,A,C){this.tagName=B;this.markup=A;this.nodelist=this.nodelist||[];this.parse(C)},parse:function(A){},render:function(A){return""}});Liquid.Block=Class.create(Liquid.Tag,{initialize:function($super,B,A,C){this.blockName=B;this.blockDelimiter="end"+this.blockName;$super(B,A,C)},parse:function(C){this.nodelist=this.nodelist||[];$A(this.nodelist).clear();var B=C.shift();C.push("");while(C.length){if(/^\{\%/.test(B)){var A=B.match(/^\{\%\s*(\w+)\s*(.*)?\%\}$/);if(A){if(this.blockDelimiter==A[1]){this.endTag();return }if(A[1] in Liquid.Template.tags){this.nodelist.push(new Liquid.Template.tags[A[1]](A[1],A[2],C))}else{this.unknownTag(A[1],A[2],C)}}else{throw ("Tag '"+B+"' was not properly terminated with: %}")}}else{if(/^\{\{/.test(B)){this.nodelist.push(this.createVariable(B))}else{this.nodelist.push(B)}}B=C.shift()}this.assertMissingDelimitation()},endTag:function(){},unknownTag:function(A,C,B){switch(A){case"else":throw (this.blockName+" tag does not expect else tag");break;case"end":throw ("'end' is not a valid delimiter for "+this.blockName+" tags. use "+this.blockDelimiter);break;default:throw ("Unknown tag: "+A)}},createVariable:function(B){var A=B.match(/^\{\{(.*)\}\}$/);if(A){return new Liquid.Variable(A[1])}else{throw ("Variable '"+B+"' was not properly terminated with: }}")}},render:function(A){return this.renderAll(this.nodelist,A)},renderAll:function(B,A){return $A(B||[]).map(function(E,D){var C="";try{C=(E.render)?E.render(A):E}catch(F){C=A.handleError(F)}return C})},assertMissingDelimitation:function(){throw (this.blockName+" tag was never closed")}});Liquid.Document=Class.create(Liquid.Block,{initialize:function(A){this.blockDelimiter=[];this.parse(A)},assertMissingDelimitation:function(){}});Liquid.Strainer=Class.create({initialize:function(A){this.context=A},respondTo:function(A){return(A in this)}});Liquid.Strainer.filters=$H({});Liquid.Strainer.globalFilter=function(A){Liquid.Strainer.filters.update(A);Liquid.Strainer.addMethods(A)};Liquid.Strainer.requiredMethods=$A(["respondTo","context"]);Liquid.Strainer.create=function(A){var B=new Liquid.Strainer(A);return B};Liquid.Context=Class.create({initialize:function(B,A,C){this.scopes=[$H(B||{})];this.registers=A||{};this.errors=[];this.rethrowErrors=C;this.strainer=Liquid.Strainer.create(this)},get:function(A){return this.resolve(A)},set:function(A,B){this.scopes[0].set(A,B)},hasKey:function(A){return(this.resolve(A))?true:false},push:function(){var A=$H({});this.scopes.unshift(A);return A},merge:function(A){return this.scopes[0].update(A)},pop:function(){if(this.scopes.length==1){throw"Context stack error"}return this.scopes.shift()},stack:function(B,C){var A=null;this.push();try{A=B.apply(C||this.strainer)}finally{this.pop()}return A},invoke:function(C,B){if(this.strainer.respondTo(C)){var A=this.strainer[C].apply(this.strainer,B);return A}else{return $A(B).first()}},resolve:function(D){switch(D){case null:case"nil":case"null":case"":return null;case"true":return true;case"false":return false;case"blank":case"empty":return"";default:if((/^'(.*)'$/).test(D)){return D.replace(/^'(.*)'$/,"$1")}else{if((/^"(.*)"$/).test(D)){return D.replace(/^"(.*)"$/,"$1")}else{if((/^(\d+)$/).test(D)){return parseInt(D.replace(/^(\d+)$/,"$1"))}else{if((/^(\d[\d\.]+)$/).test(D)){return parseFloat(D.replace(/^(\d[\d\.]+)$/,"$1"))}else{if((/^\((\S+)\.\.(\S+)\)$/).test(D)){var B=D.match(/^\((\S+)\.\.(\S+)\)$/),E=B[1],C=B[2];arr=$R(E,C).toArray();return arr}else{var A=this.variable(D);return A}}}}}}},findVariable:function(C){for(var B=0;B<this.scopes.length;B++){var D=this.scopes[B];if(D&&D.keys().include(C)){var A=D.get(C);if(typeof (A)=="function"){A=A.apply(this);D.set(C,A)}if(A&&typeof (A)=="object"&&("toLiquid" in A)){A=A.toLiquid()}if(A&&typeof (A)=="object"&&("setContext" in A)){A.setContext(self)}return A}}return null},variable:function(B){if(typeof B!="string"){return null}var F=B.match(/\[[^\]]+\]|(?:[\w\-]\??)+/g),D=F.shift(),E=D.match(/^\[(.*)\]$/);if(E){D=this.resolve(E[1])}var C=this.findVariable(D),A=this;if(C){F.each(function(G){var H=G.match(/^\[(.*)\]$/);if(H){var G=A.resolve(H[1]);if(typeof (C[G])=="function"){C[G]=C[G].apply(this)}C=C[G];if(typeof (C)=="object"&&("toLiquid" in C)){C=C.toLiquid()}}else{if((typeof (C)=="object"||typeof (C)=="hash")&&(G in C)){res=C[G];if(typeof (res)=="function"){res=C[G]=res.apply(A)}if(typeof (res)=="object"&&("toLiquid" in res)){C=res.toLiquid()}else{C=res}}else{if((/^\d+$/).test(G)){pos=parseInt(G);if(typeof (C[pos])=="function"){C[pos]=C[pos].apply(A)}if(typeof (C[pos])=="object"&&typeof (C[pos])=="object"&&("toLiquid" in C[pos])){C=C[pos].toLiquid()}else{C=C[pos]}}else{if(typeof (C[G])=="function"&&["length","size","first","last"].include(G)){C=C[G].apply(G);if("toLiquid" in C){C=C.toLiquid()}}else{return null}}}if(typeof (C)=="object"&&("setContext" in C)){C.setContext(A)}}})}return C},addFilters:function(A){A=A.flatten();A.each(function(B){if(typeof (B)!="object"){throw ("Expected object but got: "+typeof (B))}this.strainer.addMethods(B)})},handleError:function(A){this.errors.push(A);if(this.rethrowErrors){throw A}return"Liquid error: "+(A.message||A.description||A)}});Liquid.Template=Class.create({initialize:function(){this.root=null;this.registers=$H({});this.assigns=$H({});this.errors=[];this.rethrowErrors=false;this.lastContext=null},parse:function(A){this.root=new Liquid.Document(Liquid.Template.tokenize(A));return this},render:function(){if(!this.root){return""}var A={ctx:arguments[0],filters:arguments[1],registers:arguments[2]};var B=null;if(A.ctx instanceof Liquid.Context){B=A.ctx;this.assigns=B.assigns;this.registers=B.registers}else{if(A.ctx){this.assigns.update(A.ctx)}if(A.registers){this.registers.update(A.registers)}B=new Liquid.Context(this.assigns,this.registers,this.rethrowErrors)}if(A.filters){B.addFilters(arg.filters)}try{return this.root.render(B).join("")}finally{this.errors=B.errors;this.lastContext=B}},renderWithErrors:function(){this.renderWithErrors=true;return this.render.apply(this,arguments)}});Liquid.Template.tags={};Liquid.Template.registerTag=function(B,A){Liquid.Template.tags[B]=A};Liquid.Template.registerFilter=function(A){Liquid.Strainer.globalFilter(A)};Liquid.Template.tokenize=function(B){var A=B.split(/(\{\%.*?\%\}|\{\{.*?\}\}?)/);if(A[0]==""){A.shift()}return A};Liquid.Template.parse=function(A){return(new Liquid.Template()).parse(A)};Liquid.Variable=Class.create({initialize:function(B){this.markup=B;this.name=null;this.filters=[];var A=this;var D=B.match(/\s*("[^"]+"|'[^']+'|[^\s,|]+)/);if(D){this.name=D[1];var C=B.match(/\|\s*(.*)/);if(C){var E=C[1].split(/\|/);E.each(function(I){var H=I.match(/\s*(\w+)/);if(H){var G=H[1];var F=[];$A(I.match(/(?:[:|,]\s*)("[^"]+"|'[^']+'|[^\s,|]+)/g)||[]).flatten().each(function(J){var K=J.match(/^[\s|:|,]*(.*?)[\s]*$/);if(K){F.push(K[1])}});A.filters.push([G,F])}})}}},render:function(A){if(this.name==null){return""}output=A.get(this.name);this.filters.each(function(D){var C=D[0],B=$A(D[1]||[]).map(function(E){return A.get(E)});B.unshift(output);output=A.invoke(C,B)});return output}});Liquid.Condition=Class.create({initialize:function(C,A,B){this.left=C;this.operator=A;this.right=B;this.childRelation=null;this.childCondition=null;this.attachment=null},evaluate:function(B){B=B||new Liquid.Context();var A=this.interpretCondition(this.left,this.right,this.operator,B);switch(this.childRelation){case"or":return(A||this.childCondition.evaluate(B));case"and":return(A&&this.childCondition.evaluate(B));default:return A}},or:function(A){this.childRelation="or";this.childCondition=A},and:function(A){this.childRelation="and";this.childCondition=A},attach:function(A){this.attachment=A;return this.attachment},isElse:false,interpretCondition:function(D,C,E,B){if(!E){return B.get(D)}D=B.get(D);C=B.get(C);E=Liquid.Condition.operators[E];if(!E){throw ("Unknown operator "+E)}var A=E(D,C);return A},toString:function(){return"<Condition "+this.left+" "+this.operator+" "+this.right+">"}});Liquid.Condition.operators={"==":function(A,B){return(A==B)},"=":function(A,B){return(A==B)},"!=":function(A,B){return(A!=B)},"<>":function(A,B){return(A!=B)},"<":function(A,B){return(A<B)},">":function(A,B){return(A>B)},"<=":function(A,B){return(A<=B)},">=":function(A,B){return(A>=B)},contains:function(A,B){return $A(A).include(B)},hasKey:function(A,B){return $H(A).keys().include(B)},hasValue:function(A,B){return $H(A).get(B)}};Liquid.ElseCondition=Class.create(Liquid.Condition,{isElse:true,evaluate:function(A){return true},toString:function(){return"<ElseCondition>"}});Liquid.Drop=Class.create({setContext:function(A){this.context=A},beforeMethod:function(A){},invokeDrop:function(B){var A=this.beforeMethod();if(!A&&(B in this)){A=this[B].apply(this)}return A},hasKey:function(A){return true}});Liquid.Template.registerTag("assign",Class.create(Liquid.Tag,{tagSyntax:/((?:\(?[\w\-\.\[\]]\)?)+)\s*=\s*((?:"[^"]+"|'[^']+'|[^\s,|]+)+)/,initialize:function($super,B,A,D){var C=A.match(this.tagSyntax);if(C){this.to=C[1];this.from=C[2]}else{throw ("Syntax error in 'assign' - Valid syntax: assign [var] = [source]")}$super(B,A,D)},render:function(A){A.scopes.last().set(this.to.toString(),A.get(this.from));return""}}));Liquid.Template.registerTag("cache",Class.create(Liquid.Block,{tagSyntax:/(\w+)/,initialize:function($super,B,A,D){var C=A.match(this.tagSyntax);if(C){this.to=C[1]}else{throw ("Syntax error in 'cache' - Valid syntax: cache [var]")}$super(B,A,D)},render:function($super,B){var A=$super(B);B.scopes.last()[this.to]=[A].flatten().join("");return""}}));Liquid.Template.registerTag("capture",Class.create(Liquid.Block,{tagSyntax:/(\w+)/,initialize:function($super,B,A,D){var C=A.match(this.tagSyntax);if(C){this.to=C[1]}else{throw ("Syntax error in 'capture' - Valid syntax: capture [var]")}$super(B,A,D)},render:function($super,B){var A=$super(B);B.set(this.to,[A].flatten().join(""));return""}}));Liquid.Template.registerTag("case",Class.create(Liquid.Block,{tagSyntax:/("[^"]+"|'[^']+'|[^\s,|]+)/,tagWhenSyntax:/("[^"]+"|'[^']+'|[^\s,|]+)(?:(?:\s+or\s+|\s*\,\s*)("[^"]+"|'[^']+'|[^\s,|]+.*))?/,initialize:function($super,B,A,D){this.blocks=[];this.nodelist=[];var C=A.match(this.tagSyntax);if(C){this.left=C[1]}else{throw ("Syntax error in 'case' - Valid syntax: case [condition]")}$super(B,A,D)},unknownTag:function($super,A,B,C){switch(A){case"when":this.recordWhenCondition(B);break;case"else":this.recordElseCondition(B);break;default:$super(A,B,C)}},render:function(C){var B=this,A=$A([]),D=true;C.stack(function(){for(var E=0;E<B.blocks.length;E++){var F=B.blocks[E];if(F.isElse){if(D==true){A=$A([A,B.renderAll(F.attachment,C)]).flatten()}return A}else{if(F.evaluate(C)){D=false;A=$A([A,B.renderAll(F.attachment,C)]).flatten()}}}});return A},recordWhenCondition:function(A){while(A){var B=A.match(this.tagWhenSyntax);if(!B){throw ("Syntax error in tag 'case' - Valid when condition: {% when [condition] [or condition2...] %} ")}A=B[2];var C=new Liquid.Condition(this.left,"==",B[1]);this.blocks.push(C);this.nodelist=C.attach([])}},recordElseCondition:function(A){if((A||"").strip()!=""){throw ("Syntax error in tag 'case' - Valid else condition: {% else %} (no parameters) ")}var B=new Liquid.ElseCondition();this.blocks.push(B);this.nodelist=B.attach([])}}));Liquid.Template.registerTag("comment",Class.create(Liquid.Block,{render:function(A){return""}}));Liquid.Template.registerTag("cycle",Class.create(Liquid.Tag,{tagSimpleSyntax:/"[^"]+"|'[^']+'|[^\s,|]+/,tagNamedSyntax:/("[^"]+"|'[^']+'|[^\s,|]+)\s*\:\s*(.*)/,initialize:function($super,A,B,D){var C,E;C=B.match(this.tagNamedSyntax);if(C){this.variables=this.variablesFromString(C[2]);this.name=C[1]}else{C=B.match(this.tagSimpleSyntax);if(C){this.variables=this.variablesFromString(B);this.name="'"+this.variables.toString()+"'"}else{throw ("Syntax error in 'cycle' - Valid syntax: cycle [name :] var [, var2, var3 ...]")}}$super(A,B,D)},render:function(D){var B=this,C=D.get(B.name),A="";if(!D.registers.cycle){D.registers.cycle=$H({})}if(!D.registers.cycle[C]){D.registers.cycle[C]=0}D.stack(function(){var E=D.registers.cycle[C],F=D.get(B.variables[E]);E+=1;if(E==B.variables.length){E=0}D.registers.cycle[C]=E;A=F});return A},variablesFromString:function(A){return A.split(",").map(function(B){var C=B.match(/\s*("[^"]+"|'[^']+'|[^\s,|]+)\s*/);return(C[1])?C[1]:null})}}));Liquid.Template.registerTag("for",Class.create(Liquid.Block,{tagSyntax:/(\w+)\s+in\s+((?:\(?[\w\-\.\[\]]\)?)+)/,initialize:function($super,A,B,F){var E=B.match(this.tagSyntax);if(E){this.variableName=E[1];this.collectionName=E[2];this.name=this.variableName+"-"+this.collectionName;this.attributes=$H({});var D=B.replace(this.tagSyntax,"");var C=B.match(/(\w*?)\s*\:\s*("[^"]+"|'[^']+'|[^\s,|]+)/g);if(C){C.each(function(G){G=G.split(":");this.attributes.set(G[0].strip(),G[1].strip())},this)}}else{throw ("Syntax error in 'for loop' - Valid syntax: for [item] in [collection]")}$super(A,B,F)},render:function(B){var I=this,D=[],H=$A(B.get(this.collectionName)||[]),G=[0,H.length];if(!B.registers["for"]){B.registers["for"]=$H({})}if(this.attributes.limit||this.attributes.offset){var F=0,E=0,A=0,C=null;if(this.attributes.offset=="continue"){F=B.registers["for"][this.name]}else{F=B.get(this.attributes.offset)||0}E=B.get(this.attributes.limit);A=(E)?F+E+1:H.length;G=[F,A-1];B.registers["for"][this.name]=A}segment=H.slice(G[0],G[1]);if(!segment||segment.length==0){return""}B.stack(function(){var J=segment.length;segment.each(function(L,K){B.set(I.variableName,L);B.set("forloop",{name:I.name,length:J,index:(K+1),index0:K,rindex:(J-K),rindex0:(J-K-1),first:(K==0),last:(K==(J-1))});D.push((I.renderAll(I.nodelist,B)||[]).join(""))})});return[D].flatten().join("")}}));Liquid.Template.registerTag("if",Class.create(Liquid.Block,{tagSyntax:/("[^"]+"|'[^']+'|[^\s,|]+)\s*([=!<>a-z_]+)?\s*("[^"]+"|'[^']+'|[^\s,|]+)?/,initialize:function($super,A,B,C){this.nodelist=[];this.blocks=[];this.pushBlock("if",B);$super(A,B,C)},unknownTag:function($super,A,B,C){if($A(["elsif","else"]).include(A)){this.pushBlock(A,B)}else{$super(A,B,C)}},render:function(C){var B=this,A="";C.stack(function(){for(var D=0;D<B.blocks.length;D++){var E=B.blocks[D];if(E.evaluate(C)){A=B.renderAll(E.attachment,C);return }}});return[A].flatten().join("")},pushBlock:function(A,C){var G;if(A=="else"){G=new Liquid.ElseCondition()}else{var F=C.split(/\b(and|or)\b/).reverse(),E=F.shift().match(this.tagSyntax);if(!E){throw ("Syntax Error in tag '"+A+"' - Valid syntax: "+A+" [expression]")}var H=new Liquid.Condition(E[1],E[2],E[3]);while(F.length>0){var B=F.shift(),E=F.shift().match(this.tagSyntax);if(!E){throw ("Syntax Error in tag '"+A+"' - Valid syntax: "+A+" [expression]")}var D=new Liquid.Condition(E[1],E[2],E[3]);D[B](H);H=D}G=H}G.attach($A([]));this.blocks.push(G);this.nodelist=G.attachment}}));Liquid.Template.registerTag("ifchanged",Class.create(Liquid.Block,{render:function(C){var B=this,A="";C.stack(function(){var D=B.renderAll(B.nodelist,C).join("");if(D!=C.registers.ifchanged){A=D;C.registers.ifchanged=A}});return A}}));Liquid.Template.registerTag("include",Class.create(Liquid.Tag,{tagSyntax:/((?:"[^"]+"|'[^']+'|[^\s,|]+)+)(\s+(?:with|for)\s+((?:"[^"]+"|'[^']+'|[^\s,|]+)+))?/,initialize:function($super,A,B,E){var D=(B||"").match(this.tagSyntax);if(D){this.templateName=D[1];this.templateNameVar=this.templateName.substring(1,this.templateName.length-1);this.variableName=D[3];this.attributes=$H({});var C=B.match(/(\w*?)\s*\:\s*("[^"]+"|'[^']+'|[^\s,|]+)/g);if(C){C.each(function(F){F=F.split(":");this.attributes.set(F[0].strip(),F[1].strip())},this)}}else{throw ("Error in tag 'include' - Valid syntax: include '[template]' (with|for) [object|collection]")}$super(A,B,E)},render:function(E){var C=this,F=Liquid.readTemplateFile(E.get(this.templateName)),B=Liquid.parse(F),D=E.get((this.variableName||this.templateNameVar)),A="";E.stack(function(){C.attributes.each(function(G){E.set(G.key,E.get(G.value))});if(D instanceof Array){A=D.map(function(G){E.set(C.templateNameVar,G);return B.render(E)})}else{E.set(C.templateNameVar,D);A=B.render(E)}});A=[A].flatten().join("");return A}}));Liquid.Template.registerTag("unless",Class.create(Liquid.Template.tags["if"],{render:function(C){var B=this,A="";C.stack(function(){var E=B.blocks[0];if(!E.evaluate(C)){A=B.renderAll(E.attachment,C);return }for(var D=1;D<B.blocks.length;D++){var E=B.blocks[D];if(E.evaluate(C)){A=B.renderAll(E.attachment,C);return }}});return A}}));Liquid.Template.registerFilter({size:function(A){return(A.length)?A.length:0},downcase:function(A){return A.toString().toLowerCase()},upcase:function(A){return A.toString().toUpperCase()},capitalize:function(A){return A.toString().capitalize()},escape:function(A){A=A.toString();A=A.replace(/&/g,"&amp;");A=A.replace(/</g,"&lt;");A=A.replace(/>/g,"&gt;");A=A.replace(/"/g,"&quot;");return A},h:function(A){A=A.toString();A=A.replace(/&/g,"&amp;");A=A.replace(/</g,"&lt;");A=A.replace(/>/g,"&gt;");A=A.replace(/"/g,"&quot;");return A},truncate:function(B,D,C){if(!B||B==""){return""}D=D||50;C=C||"...";var A=B.slice(0,D);return A+C},truncatewords:function(B,E,C){if(!B||B==""){return""}E=parseInt(E||15);C=C||"...";var D=B.toString().split(" "),A=Math.max((E),0);return(D.length>A)?D.slice(0,A).join(" ")+C:B},truncate_words:function(B,E,C){if(!B||B==""){return""}E=parseInt(E||15);C=C||"...";var D=B.toString().split(" "),A=Math.max((E),0);return(D.length>A)?D.slice(0,A).join(" ")+C:B},strip_html:function(A){return A.toString().replace(/<.*?>/g,"")},strip_newlines:function(A){return A.toString().replace(/\n/g,"")},join:function(A,B){B=B||" ";return A.join(B)},sort:function(A){return A.sort()},reverse:function(A){return A.reverse()},replace:function(A,B,C){C=C||"";return A.toString().replace(new RegExp(B,"g"),C)},replace_first:function(A,B,C){C=C||"";return A.toString().replace(new RegExp(B,""),C)},newline_to_br:function(A){return A.toString().replace(/\n/g,"<br/>\n")},date:function(A,C){var B;if(A instanceof Date){B=A}if(!(B instanceof Date)&&A=="now"){B=new Date()}if(!(B instanceof Date)){B=new Date(A)}if(!(B instanceof Date)){B=new Date(Date.parse(A))}if(!(B instanceof Date)){return A}return B.strftime(C)},first:function(A){return A[0]},last:function(A){A=A;return A[A.length-1]}});if(!(new Date()).strftime){(function(){Date.ext={};Date.ext.util={};Date.ext.util.xPad=function(A,C,B){if(typeof (B)=="undefined"){B=10}for(;parseInt(A,10)<B&&B>1;B/=10){A=C.toString()+A}return A.toString()};Date.prototype.locale="en-GB";if(document.getElementsByTagName("html")&&document.getElementsByTagName("html")[0].lang){Date.prototype.locale=document.getElementsByTagName("html")[0].lang}Date.ext.locales={};Date.ext.locales.en={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],x:"%d/%m/%y",X:"%T"};Date.ext.locales["en-US"]=Date.ext.locales.en;Date.ext.locales["en-US"].c="%a %d %b %Y %r %Z";Date.ext.locales["en-US"].x="%D";Date.ext.locales["en-US"].X="%r";Date.ext.locales["en-GB"]=Date.ext.locales.en;Date.ext.locales["en-AU"]=Date.ext.locales["en-GB"];Date.ext.formats={a:function(A){return Date.ext.locales[A.locale].a[A.getDay()]},A:function(A){return Date.ext.locales[A.locale].A[A.getDay()]},b:function(A){return Date.ext.locales[A.locale].b[A.getMonth()]},B:function(A){return Date.ext.locales[A.locale].B[A.getMonth()]},c:"toLocaleString",C:function(A){return Date.ext.util.xPad(parseInt(A.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(A){return Date.ext.util.xPad(parseInt(Date.ext.util.G(A)/100,10),0)},G:function(C){var D=C.getFullYear();var B=parseInt(Date.ext.formats.V(C),10);var A=parseInt(Date.ext.formats.W(C),10);if(A>B){D++}else{if(A===0&&B>=52){D--}}return D},H:["getHours","0"],I:function(B){var A=B.getHours()%12;return Date.ext.util.xPad(A===0?12:A,0)},j:function(C){var A=C-new Date(""+C.getFullYear()+"/1/1 GMT");A+=C.getTimezoneOffset()*60000;var B=parseInt(A/60000/60/24,10)+1;return Date.ext.util.xPad(B,0,100)},m:function(A){return Date.ext.util.xPad(A.getMonth()+1,0)},M:["getMinutes","0"],p:function(A){return Date.ext.locales[A.locale].p[A.getHours()>=12?1:0]},P:function(A){return Date.ext.locales[A.locale].P[A.getHours()>=12?1:0]},S:["getSeconds","0"],u:function(A){var B=A.getDay();return B===0?7:B},U:function(D){var A=parseInt(Date.ext.formats.j(D),10);var C=6-D.getDay();var B=parseInt((A+C)/7,10);return Date.ext.util.xPad(B,0)},V:function(D){var C=parseInt(Date.ext.formats.W(D),10);var A=(new Date(""+D.getFullYear()+"/1/1")).getDay();var B=C+(A>4||A<=1?0:1);if(B==53&&(new Date(""+D.getFullYear()+"/12/31")).getDay()<4){B=1}else{if(B===0){B=Date.ext.formats.V(new Date(""+(D.getFullYear()-1)+"/12/31"))}}return Date.ext.util.xPad(B,0)},w:"getDay",W:function(D){var A=parseInt(Date.ext.formats.j(D),10);var C=7-Date.ext.formats.u(D);var B=parseInt((A+C)/7,10);return Date.ext.util.xPad(B,0,10)},y:function(A){return Date.ext.util.xPad(A.getFullYear()%100,0)},Y:"getFullYear",z:function(C){var B=C.getTimezoneOffset();var A=Date.ext.util.xPad(parseInt(Math.abs(B/60),10),0);var D=Date.ext.util.xPad(B%60,0);return(B>0?"-":"+")+A+D},Z:function(A){return A.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(A){return"%"}};Date.ext.aggregates={c:"locale",D:"%m/%d/%y",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"};Date.ext.aggregates.z=Date.ext.formats.z(new Date());Date.ext.aggregates.Z=Date.ext.formats.Z(new Date());Date.ext.unsupported={};Date.prototype.strftime=function(A){if(!(this.locale in Date.ext.locales)){if(this.locale.replace(/-[a-zA-Z]+$/,"") in Date.ext.locales){this.locale=this.locale.replace(/-[a-zA-Z]+$/,"")}else{this.locale="en-GB"}}var C=this;while(A.match(/%[cDhnrRtTxXzZ]/)){A=A.replace(/%([cDhnrRtTxXzZ])/g,function(E,D){var F=Date.ext.aggregates[D];return(F=="locale"?Date.ext.locales[C.locale][D]:F)})}var B=A.replace(/%([aAbBCdegGHIjmMpPSuUVwWyY%])/g,function(E,D){var F=Date.ext.formats[D];if(typeof (F)=="string"){return C[F]()}else{if(typeof (F)=="function"){return F.call(C,C)}else{if(typeof (F)=="object"&&typeof (F[0])=="string"){return Date.ext.util.xPad(C[F[0]](),F[1])}else{return D}}}});C=null;return B}})()};